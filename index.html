<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØµØ§Ù†Ø¹ Ù…ÙØ§Ø¬Ø¢Øª Ø§Ù„Ø­Ø¨ ğŸ’–</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #ff4d6d; --secondary: #ff758f; --bg: #fff0f3; }
        body { font-family: 'Cairo', sans-serif; background: var(--bg); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow-x: hidden; }
        .container { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); padding: 25px; border-radius: 30px; box-shadow: 0 20px 50px rgba(255, 77, 109, 0.2); width: 90%; max-width: 450px; text-align: center; border: 1px solid #fff; z-index: 10; }
        h1 { color: var(--primary); font-size: 1.6rem; margin-bottom: 5px; }
        p { font-size: 0.9rem; color: #666; margin-bottom: 20px; }
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #ffccd5; border-radius: 15px; font-family: 'Cairo'; outline: none; box-sizing: border-box; }
        label { display: block; text-align: right; font-size: 13px; color: var(--primary); font-weight: bold; margin-top: 10px; }
        button { background: linear-gradient(45deg, var(--primary), var(--secondary)); color: white; border: none; padding: 15px; border-radius: 50px; font-size: 18px; font-weight: bold; cursor: pointer; width: 100%; transition: 0.3s; margin-top: 15px; }
        button:hover { transform: scale(1.03); }
        #resultArea { margin-top: 20px; display: none; background: white; padding: 15px; border-radius: 15px; border: 2px dashed var(--primary); }
        .bg-element { position: fixed; z-index: -1; animation: float linear infinite; opacity: 0.6; }
        @keyframes float { from { transform: translateY(100vh) rotate(0deg); } to { transform: translateY(-10vh) rotate(360deg); } }
    </style>
</head>
<body>

<div id="elements-container"></div>

<div class="container">
    <h1>ğŸ¥°ğŸ˜ Ø¨Ø­Ø¨Ùƒ ğŸ¥°ğŸ˜</h1>
    <p>Ø§ØµÙ†Ø¹ Ù…ÙØ§Ø¬Ø£Ø© Ø®Ø§ØµØ© Ù„Ø­Ø¨ÙŠØ¨Ùƒ Ø¨ØµÙˆØªÙƒ ÙˆØµÙˆØ±ØªÙƒ</p>
    
    <input type="text" id="sender" placeholder="Ø§Ø³Ù…Ùƒ (Ø§Ù„Ù…Ø±Ø³Ù„)">
    <input type="text" id="receiver" placeholder="Ø§Ø³Ù… Ø­Ø¨ÙŠØ¨Ùƒ (Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„)">
    
    <label>ğŸ“¸ Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
    <input type="file" id="photo" accept="image/*">

    <label>ğŸµ Ø§Ø±ÙØ¹ Ø£ØºÙ†ÙŠØ© MP3 (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - ÙŠÙØ¶Ù„ Ù…Ù„Ù ØµØºÙŠØ±):</label>
    <input type="file" id="audio" accept="audio/*">

    <select id="type">
        <option value="ğŸ¥° Ø¨Ø­Ø¨Ùƒ ğŸ¥°">ğŸ¥°ğŸ˜ Ø¨Ø­Ø¨Ùƒ ğŸ¥°ğŸ˜</option>
        <option value="ğŸ˜˜ Ø¨Ø¹Ø´Ù‚Ùƒ ğŸ˜˜">ğŸ˜˜ğŸ˜˜ Ø¨Ø¹Ø´Ù‚Ùƒ ğŸ˜˜ğŸ˜˜</option>
        <option value="ğŸ’‹ ÙˆØ­Ø´ØªÙ†ÙŠ ğŸ’‹">ğŸ’‹ğŸ’‹ ÙˆØ­Ø´ØªÙ†ÙŠ ğŸ’‹ğŸ’‹</option>
    </select>
    
    <textarea id="message" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©..."></textarea>
    
    <button onclick="generateLink()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø³Ø­Ø±ÙŠ âœ¨</button>

    <div id="resultArea">
        <p>Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ§Ø¨Ø¹Øª Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø©:</p>
        <input type="text" id="generatedLink" readonly style="font-size: 12px;">
        <button onclick="copyLink()" style="background: #4CAF50;">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ğŸ“‹</button>
    </div>
</div>

<script>
    async function generateLink() {
        const s = document.getElementById('sender').value;
        const r = document.getElementById('receiver').value;
        const m = document.getElementById('message').value;
        const t = document.getElementById('type').value;
        const photoFile = document.getElementById('photo').files[0];
        const audioFile = document.getElementById('audio').files[0];

        if(!s || !r || !m) { alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© â¤ï¸"); return; }

        let pBase64 = "", aBase64 = "";
        if (photoFile) pBase64 = await toBase64(photoFile);
        if (audioFile) aBase64 = await toBase64(audioFile);

        const msgData = { s, r, m, t, p: pBase64, a: aBase64 };
        const encoded = btoa(unescape(encodeURIComponent(JSON.stringify(msgData))));
        
        const baseUrl = window.location.origin + window.location.pathname.replace('index.html', '');
        document.getElementById('generatedLink').value = `${baseUrl}message.html?msg=${encoded}`;
        document.getElementById('resultArea').style.display = 'block';
    }

    const toBase64 = file => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = error => reject(error);
    });

    function copyLink() {
        const input = document.getElementById("generatedLink");
        input.select();
        document.execCommand("copy");
        alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! Ø£Ø±Ø³Ù„Ù‡ Ù„Ù…Ù† ØªØ­Ø¨ ğŸ’‹");
    }

    const ems = ['â¤ï¸','ğŸ’‹','ğŸ¥°','ğŸ˜'];
    setInterval(() => {
        const el = document.createElement('div');
        el.className = 'bg-element';
        el.innerHTML = ems[Math.floor(Math.random()*ems.length)];
        el.style.left = Math.random()*100+'vw';
        el.style.fontSize = Math.random()*20+20+'px';
        el.style.animationDuration = Math.random()*3+3+'s';
        document.getElementById('elements-container').appendChild(el);
        setTimeout(() => el.remove(), 5000);
    }, 500);
</script>
</body>
</html>
