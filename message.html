<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙØ§Ø¬Ø£Ø© Ù…Ù„ÙƒÙŠØ© Ù„Ùƒ ğŸ‘‘</title>
    <style>
        :root {
            --blue-light: #e0f2fe;
            --blue-royal: #0077b6;
            --pink-soft: #ffb7c5;
            --kashmir: #ac7373;
        }

        body {
            margin: 0; padding: 0; overflow-x: hidden;
            /* ØªØ¯Ø±Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù†: Ø£Ø²Ø±Ù‚ØŒ Ø£Ø¨ÙŠØ¶ØŒ Ø¨Ù…Ø¨ÙŠØŒ ÙƒØ´Ù…ÙŠØ± */
            background: linear-gradient(-45deg, #0077b6, #ffffff, #ffb7c5, #ac7373);
            background-size: 400% 400%; animation: bg 15s infinite;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; color: #333;
        }
        @keyframes bg { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ù‚Ù„Ø¨: Ø£Ø¨ÙŠØ¶ ÙÙŠ Ø£Ø²Ø±Ù‚ */
        #startScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ffffff, #e0f2fe);
            z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .big-heart {
            font-size: 150px; cursor: pointer; animation: pulse 1.5s infinite;
            filter: drop-shadow(0 0 20px #0077b6);
        }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.1);} 100% {transform: scale(1);} }
        
        .names-on-heart { 
            position: absolute; font-size: 22px; font-weight: bold; 
            pointer-events: none; color: #0077b6; text-shadow: 1px 1px 2px rgba(255,255,255,0.8); 
        }

        #startScreen p { color: #0077b6; font-weight: bold; margin-top: 20px; }

        .particle { position: fixed; bottom: -50px; z-index: 5; animation: fly 6s linear infinite; pointer-events: none; }
        @keyframes fly { to { transform: translateY(-110vh) rotate(360deg); opacity: 0; } }

        .content { display: none; padding: 20px; z-index: 10; position: relative; max-width: 600px; margin: auto; }
        
        #userImage { 
            width: 100%; max-width: 300px; border-radius: 20px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); margin: 20px auto; 
            display: none; border: 4px solid white;
        }

        #typewriter { 
            font-size: 24px; font-weight: bold; margin: 20px; min-height: 50px; 
            line-height: 1.6; color: #444; background: rgba(255,255,255,0.5);
            padding: 15px; border-radius: 15px;
        }
        
        iframe, video { border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); width: 100%; margin-top: 15px; border: none; }
        
        .back-btn {
            margin: 40px 0; padding: 12px 25px; background: #0077b6; color: white;
            border-radius: 50px; text-decoration: none; font-weight: bold; display: inline-block;
            transition: 0.3s; box-shadow: 0 5px 15px rgba(0,119,182,0.3);
        }
        .back-btn:hover { background: #ac7373; transform: scale(1.05); }
    </style>
</head>
<body>

    <div id="startScreen">
        <div class="big-heart" onclick="startShow()">ğŸ’™</div>
        <div class="names-on-heart" id="heartNames"></div>
        <p>Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù„Ø¨ Ø§Ù„Ø£Ø²Ø±Ù‚ ÙŠØ§ Ù‚Ù…Ø± ğŸ’</p>
    </div>

    <div class="content" id="mainContent">
        <h2 id="toHeader" style="color: #0077b6;"></h2>
        
        <img id="userImage" src="" alt="Ù…ÙØ§Ø¬Ø£Ø©">

        <div id="videoContainer"></div>

        <div id="typewriter"></div>

        <div id="audioContainer"></div>

        <a href="index.html" class="back-btn">Ø§ØµÙ†Ø¹ Ù…ÙØ§Ø¬Ø£Ø© Ø¬Ø¯ÙŠØ¯Ø© âœ¨</a>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const from = params.get('from') || "Ù…Ø­Ø¨Ùƒ";
        const to = params.get('to') || "Ø­Ø¨ÙŠØ¨ÙŠ";
        const msg = params.get('m') || "Ø£Ù†Øª Ø£ØºÙ„Ù‰ Ù…Ø§ ÙÙŠ Ø­ÙŠØ§ØªÙŠ";
        const video = params.get('v') || "";
        const audio = params.get('a') || "";
        const image = params.get('i') || "";

        document.getElementById('heartNames').innerText = `${from} ğŸ’™ ${to}`;
        document.getElementById('toHeader').innerText = `Ø¥Ù„Ù‰: ${to} âœ¨`;

        function startShow() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            
            if (image) {
                const imgTag = document.getElementById('userImage');
                imgTag.src = decodeURIComponent(image);
                imgTag.style.display = 'block';
            }

            if (audio) {
                const audioArea = document.getElementById('audioContainer');
                audioArea.innerHTML = `<audio id="bgMusic" autoplay loop><source src="${decodeURIComponent(audio)}" type="audio/mpeg"></audio>`;
                document.getElementById('bgMusic').play().catch(e => console.log("Audio play deferred"));
            }

            if (video) {
                let videoArea = document.getElementById('videoContainer');
                let vidUrl = decodeURIComponent(video);
                
                if (vidUrl.includes('youtube.com') || vidUrl.includes('youtu.be')) {
                    let vidId = vidUrl.split('v=')[1]?.split('&')[0] || vidUrl.split('/').pop().split('?')[0];
                    videoArea.innerHTML = `<iframe src="https://www.youtube.com/embed/${vidId}?autoplay=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="height:315px;"></iframe>`;
                } else {
                    videoArea.innerHTML = `<video controls autoplay style="max-height:315px;"><source src="${vidUrl}">Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</video>`;
                }
            }

            typeWriter(decodeURIComponent(msg), 0);
            setInterval(createParticle, 300);
        }

        function typeWriter(text, i) {
            if (i < text.length) {
                let char = text.charAt(i);
                document.getElementById("typewriter").innerHTML += (char === '\n' ? '<br>' : char);
                setTimeout(() => typeWriter(text, i + 1), 70);
            }
        }

        function createParticle() {
            const p = document.createElement('div');
            p.className = 'particle';
            // Ù‚Ù„ÙˆØ¨ ÙˆÙ†Ø¬ÙˆÙ… Ø²Ø±Ù‚Ø§Ø¡ ÙˆØ¨ÙŠØ¶Ø§Ø¡ Ù„ØªÙ†Ø§Ø³Ø¨ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯
            p.innerText = ['ğŸ’™', 'âœ¨', 'â˜ï¸', 'ğŸ’'][Math.floor(Math.random()*4)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.fontSize = Math.random() * 20 + 20 + 'px';
            p.style.opacity = Math.random();
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 6000);
        }
    </script>
</body>
</html>
